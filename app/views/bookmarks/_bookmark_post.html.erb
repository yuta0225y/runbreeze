<%= link_to post_path(post), class: "block" do %>
  <div class="card bg-base-100 shadow-xl flex flex-row p-4">
    <!-- 画像とカテゴリー -->
    <div class="w-1/4 relative mr-4">
      <% if post.post_image.present? %>
        <%= image_tag(post.post_image.url, alt: post.title, class: "w-full h-full object-cover aspect-square") %>
      <% else %>
        <%= image_tag("default_post_image.jpg", alt: post.title, class: "w-full h-full object-cover aspect-square") %>
      <% end %>

      <% if post.category.present? %>
        <div class="absolute top-0 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded-bl-lg">
          <%= post.category.name %>
        </div>
      <% end %>
    </div>

    <!-- コンテンツ部分 -->
    <div class="w-3/4">
      <!-- タグ -->
      <div class="flex flex-wrap space-x-2 mb-1">
        <% post.tags.each do |tag| %>
          <span class="bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full">#<%= tag.name %></span>
        <% end %>
      </div>

      <!-- タイトル -->
      <h2 class="text-lg font-bold"><%= post.title %></h2>

      <!-- 内容（概要表示） -->
      <p class="text-sm text-gray-600 line-clamp-2 mt-1"><%= truncate(post.content, length: 100) %></p>

      <!-- ユーザー情報とブックマーク解除ボタン -->
      <div class="flex items-center justify-between mt-2">
        <!-- ユーザーアイコンと名前 -->
        <div class="flex items-center">
          <% if post.user.profile_image.present? %>
            <%= image_tag(post.user.profile_image.url, alt: post.user.username, class: "w-8 h-8 rounded-full") %>
          <% else %>
            <%= image_tag("default_profile_image.svg", alt: post.user.username, class: "w-8 h-8 rounded-full") %>
          <% end %>
          <span class="text-sm text-gray-700"><%= post.user.username %></span>
        </div>
        
        <!-- ブックマーク解除ボタン -->
        <div class="flex items-center">
          <%= render 'bookmarks/unbookmark', post: post %>
        </div>
      </div>
    </div>
  </div>
<% end %>